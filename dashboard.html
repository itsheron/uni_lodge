<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Dashboard - Housing Finder</title>
    <link rel="stylesheet" href="dashboard_styles.css">
    <!-- Add Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <header>
        <div class="nav-section">
            <nav class="main-nav">
                <ul>
                    <li><a href="main.html">Home</a></li>
                    <li class="active"><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="post.html">Post Listing</a></li>
                </ul>
            </nav>
        </div>
        
        <div class="header-content">
            <h1>My Housing Dashboard</h1>
        </div>
        
        <div class="auth-section">
            <button id="userName" class="auth-button logged-in" onclick="toggleUserMenu()">
                <i class="fas fa-user-circle"></i> Welcome, User!
            </button>
            <!-- User Menu Dropdown (hidden by default) -->
            <div class="user-dropdown" id="userDropdown">
                <a href="account-settings.html" class="dropdown-item">
                    <i class="fas fa-user-cog"></i> Edit Account
                </a>
                <a href="javascript:void(0)" onclick="confirmLogout()" class="dropdown-item">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>
    </header>

    <nav class="tab-navigation">
        <button class="tab-btn active" onclick="switchTab('overview')">Overview</button>
        <button class="tab-btn" onclick="switchTab('myListings')">My Listings</button>
        <button class="tab-btn" onclick="switchTab('saved')">Saved Properties</button>
        <button class="tab-btn" onclick="switchTab('settings')">Account Settings</button>
    </nav>

    <main class="dashboard-container">
        <!-- Overview Tab -->
        <section id="overview" class="tab-content active">
            <div class="stats-cards">
                <div class="stat-card">
                    <h3>Active Listings</h3>
                    <div class="stat-number">2</div>
                    <p>Currently active</p>
                </div>
                <div class="stat-card">
                    <h3>Pending Approval</h3>
                    <div class="stat-number">1</div>
                    <p>Waiting for review</p>
                </div>
                <div class="stat-card">
                    <h3>Saved Properties</h3>
                    <div class="stat-number">5</div>
                    <p>Your favorites</p>
                </div>
                <div class="stat-card">
                    <h3>Views This Month</h3>
                    <div class="stat-number">127</div>
                    <p>On your listings</p>
                </div>
            </div>

            <div class="recent-activity">
                <h2>Recent Activity</h2>
                <div class="activity-list">
                    <div class="activity-item">
                        <div class="activity-icon new">üìù</div>
                        <div class="activity-details">
                            <h4>New listing submitted</h4>
                            <p>Your listing "2BR Apartment on North Ave" is pending approval</p>
                            <span class="activity-time">2 hours ago</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon message">üí¨</div>
                        <div class="activity-details">
                            <h4>New inquiry received</h4>
                            <p>Someone is interested in your "Studio near Tech Square"</p>
                            <span class="activity-time">5 hours ago</span>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon approved">‚úÖ</div>
                        <div class="activity-details">
                            <h4>Listing approved</h4>
                            <p>Your listing "1BR Midtown Apartment" is now live</p>
                            <span class="activity-time">1 day ago</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="quick-actions">
                <h2>Quick Actions</h2>
                <div class="action-buttons">
                    <button class="action-btn primary" onclick="window.location.href='post.html'">
                        <span>‚ûï</span>Post New Listing
                    </button>
                    <button class="action-btn" onclick="window.location.href='main.html'">
                        <span>üîç</span>Browse Properties
                    </button>
                    <button class="action-btn" onclick="switchTab('myListings')">
                        <span>üìã</span>Manage Listings
                    </button>
                </div>
            </div>
        </section>

        <!-- My Listings Tab -->
        <section id="myListings" class="tab-content">
            <div class="listings-header">
                <h2>My Listings</h2>
                <button class="action-btn primary" onclick="window.location.href='post.html'">
                    ‚ûï Post New Listing
                </button>
            </div>
            
            <div class="listings-grid">
                <div class="listing-card">
                    <div class="listing-image">
                        <img src="/api/placeholder/300/200" alt="Apartment">
                        <div class="listing-status approved">Live</div>
                    </div>
                    <div class="listing-details">
                        <h3>1BR Midtown Apartment</h3>
                        <p class="listing-price">$1,200/month</p>
                        <p class="listing-info">1 Bed ‚Ä¢ 1 Bath ‚Ä¢ 750 sq ft</p>
                        <div class="listing-stats">
                            <span>üëÅÔ∏è 45 views</span>
                            <span>üí¨ 3 inquiries</span>
                        </div>
                        <div class="listing-actions">
                            <button class="btn-edit">Edit</button>
                            <button class="btn-pause">Pause</button>
                            <button class="btn-delete">Delete</button>
                        </div>
                    </div>
                </div>

                <div class="listing-card">
                    <div class="listing-image">
                        <img src="/api/placeholder/300/200" alt="Apartment">
                        <div class="listing-status pending">Pending</div>
                    </div>
                    <div class="listing-details">
                        <h3>2BR Apartment on North Ave</h3>
                        <p class="listing-price">$1,650/month</p>
                        <p class="listing-info">2 Bed ‚Ä¢ 1.5 Bath ‚Ä¢ 950 sq ft</p>
                        <div class="listing-stats">
                            <span>‚è≥ Under review</span>
                        </div>
                        <div class="listing-actions">
                            <button class="btn-edit">Edit</button>
                            <button class="btn-delete">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Saved Properties Tab -->
        <section id="saved" class="tab-content">
            <h2>Saved Properties</h2>
            <div class="saved-filters">
                <select id="savedFilter">
                    <option>All Saved</option>
                    <option>Recently Saved</option>
                    <option>Price: Low to High</option>
                    <option>Price: High to Low</option>
                </select>
            </div>
            
            <div class="saved-grid">
                <div class="saved-card">
                    <div class="saved-image">
                        <img src="/api/placeholder/300/200" alt="Apartment">
                        <button class="remove-saved">‚ù§Ô∏è</button>
                    </div>
                    <div class="saved-details">
                        <h3>Tech Square Lofts</h3>
                        <p class="saved-price">$1,450/month</p>
                        <p class="saved-info">2 Bed ‚Ä¢ 2 Bath ‚Ä¢ 0.5 miles from campus</p>
                        <button class="btn-view">View Details</button>
                    </div>
                </div>
                
                <!-- More saved properties would be here -->
            </div>
        </section>

        <!-- Account Settings Tab -->
        <section id="settings" class="tab-content">
            <h2>Account Settings</h2>
            
            <div class="settings-form">
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="settingsName" value="">
                    <button class="btn-edit-profile">Edit</button>
                </div>
                
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="settingsEmail" value="" readonly>
                    <span class="verified">‚úì Verified</span>
                </div>
                
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" id="settingsPhone" value="">
                    <button class="btn-edit-profile">Edit</button>
                </div>
                
                <div class="form-group">
                    <label>Password</label>
                    <button class="btn-change-password">Change Password</button>
                </div>
                
                <div class="notification-settings">
                    <h3>Notification Preferences</h3>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                        Email notifications
                    </label>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                        New listing alerts
                    </label>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                        Weekly digest
                    </label>
                </div>
                
                <button class="btn-save-settings">Save Changes</button>
            </div>
        </section>
    </main>

    <!-- Logout Confirmation Modal -->
    <div class="modal" id="logoutModal">
        <div class="modal-content">
            <span class="close" onclick="closeLogoutModal()">&times;</span>
            <h2>Confirm Logout</h2>
            <p>Are you sure you want to log out?</p>
            <div class="modal-buttons">
                <button class="btn-cancel" onclick="closeLogoutModal()">Cancel</button>
                <button class="btn-confirm" onclick="handleLogout()">Logout</button>
            </div>
        </div>
    </div>

    <script>
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in
            if (!localStorage.getItem('isLoggedIn')) {
                window.location.href = 'login.html?redirect=dashboard.html';
                return;
            }
            
            // Get user info from localStorage
            const userName = localStorage.getItem('userName');
            const userEmail = localStorage.getItem('userEmail');
            
            if (userName) {
                // Update username in welcome message
                const userNameBtn = document.getElementById('userName');
                if (userNameBtn) {
                    userNameBtn.innerHTML = `<i class="fas fa-user-circle"></i> ${userName}`;
                }
                
                // Update settings form
                const settingsNameField = document.getElementById('settingsName');
                const settingsEmailField = document.getElementById('settingsEmail');
                
                if (settingsNameField) {
                    settingsNameField.value = userName;
                }
                
                if (settingsEmailField && userEmail) {
                    settingsEmailField.value = userEmail;
                }
            }
        });

        // User dropdown menu toggle
        function toggleUserMenu() {
            document.getElementById('userDropdown').classList.toggle('show');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            // If the click is outside the user menu and user button
            if (!e.target.closest('#userDropdown') && !e.target.closest('#userName')) {
                const dropdown = document.getElementById('userDropdown');
                if (dropdown && dropdown.classList.contains('show')) {
                    dropdown.classList.remove('show');
                }
            }
        });

        // Show logout confirmation modal
        function confirmLogout() {
            const logoutModal = document.getElementById('logoutModal');
            if (logoutModal) {
                logoutModal.style.display = 'block';
            }
        }

        // Close logout confirmation modal
        function closeLogoutModal() {
            const logoutModal = document.getElementById('logoutModal');
            if (logoutModal) {
                logoutModal.style.display = 'none';
            }
        }

        // Handle logout with confirmation modal
        function handleLogout() {
            // Clear all authentication data from localStorage
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('userName');
            localStorage.removeItem('userEmail');
            
            // Redirect to main page
            window.location.href = 'main.html';
            
            // Close the modal if it's open
            closeLogoutModal();
            
            // Prevent the default behavior of the button
            return false;
        }

        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active from all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Activate corresponding button
            document.querySelector(`[onclick="switchTab('${tabName}')"]`).classList.add('active');
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            const logoutModal = document.getElementById('logoutModal');
            if (event.target == logoutModal) {
                logoutModal.style.display = "none";
            }
        };
    </script>
</body>
</html>